<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
    
    <resultMap type="com.spring.user.vo.UserVo" id="UserVo">
    	<result property="id" 	column="USER_ID"/>
    	<result property="pwd" 	column="USER_PW"/>
    	<result property="name" column="USER_NAME"/>
    	<result property="phone1" column="USER_PHONE1"/>
    	<result property="phone2" column="USER_PHONE2"/>
    	<result property="phone3" column="USER_PHONE3"/>
    	<result property="addr1" column="USER_ADDR1"/>
    	<result property="addr2" column="USER_ADDR2"/>
    	<result property="company" column="USER_COMPANY"/>
    	<result property="creator" column="CREATOR"/>
    	<result property="creator_time" column="CREATOR_TIME"/>
    	<result property="modifier" column="MODIFIER"/>
    	<result property="modified_time" column="MODIFIED_TIME"/>
    	
    </resultMap>
    
    <select id="isExist" parameterType="java.lang.String" resultType="String">
		SELECT id
		FROM USER_INFO
		WHERE id=#{inputId}
	</select>
    
    <insert id="insert" parameterType="com.spring.user.vo.UserVo">
		INSERT INTO USER_INFO 
		(USER_ID, USER_PW, USER_NAME, USER_PHONE1,
		 USER_PHONE2, USER_PHONE3, USER_ADDR1, USER_ADDR2,
		 USER_COMPANY, CREATOR, CREATOR_TIME)
		VALUES(#{id}, #{pwd}, #{name}, #{phone1}, #{phone2}, #{phone3},
				#{addr1}, #{addr2}, #{company}, #{creator}, SYSDATE)
	</insert>
	
	<select id="getPwdHash" parameterType="String" resultType="String">
		SELECT USER_PW 
		FROM USER_INFO
		WHERE id=#{inputId}
	</select>
	<select id="getData" parameterType="String" resultType="com.spring.user.vo.UserVo">
		SELECT USER_ID, USER_PW, USER_NAME, USER_PHONE1,
		 USER_PHONE2, USER_PHONE3, USER_ADDR1, USER_ADDR2,
		 USER_COMPANY, CREATOR, CREATOR_TIME
		FROM USER_INFO
		WHERE id=#{id}
	</select>
	
	
	<update id="updatePwd" parameterType="com.spring.user.vo.UserVo">
		UPDATE USER_INFO
		SET pwd=#{pwd}
		WHERE id=#{id}
	</update>
	
	<update id="updateUser" parameterType="com.spring.user.vo.UserVo">
		UPDATE USER_INFO
		SET email=#{email}
		WHERE id=#{id}
	</update>
	
	<delete id="delete" parameterType="String">
		DELETE FROM users
		WHERE id=#{id}
	</delete>
    
</mapper>
